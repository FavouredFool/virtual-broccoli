% !TEX root = Konzept.tex
\chapter{Technisches Konzept}
%Es enthält Aussagen über Informationen, Regeln, Funktionen und Verarbeitungsschritte, die das zukünftige System enthalten muss. Es können auch nichtfunktionale Anforderungen wie Gebrauchstauglichkeit, Bedienbarkeit, Nachvollziehbarkeit der Verarbeitungsschritte und Testbarkeit gestellt werden.
In diesem Kapitel werden bestimmte Technologien, sowie dazugehörige technische Entscheidungen, nochmals aufgegriffen und erläutert.
\section{Weitere Technologien}
\subsection{SteamVR}
Die Videospiel-Vertriebsplattform \dq Steam\dq bietet eine eigene Softwarelösung \dq SteamVR\dq an, welche es ermöglicht verschiedene Geräte miteinander zu verbinden, damit diese beim Ausführen einer Software zusammenarbeiten. Es muss SteamVR genutzt werden, da dies die einzige Softwarelösung ist, welche die HTC VIVE Tracker 3.0 und somit das Tracken der SenseGloves im realen Raum unterstützt.
\subsection{SenseCom}
Um die SenseGloves nutzen zu können, muss zunächst eine Bluetooth-Verbindung mit dem Computer aufgebaut werden. Wenn auf diesem eine Anwendung ausgeführt wird, welche die SenseGloves unterstützt, wird die Software \dq SenseCom\dq automatisch ausgeführt. Diese ermöglicht es, die SenseGloves zu kalibrieren und daraufhin über die Anwendung zu nutzen.

\section{Entwicklungsprozess}
Während es mit der im Projekt genutzten Valve Index problemlos möglich war, das Spiel in Unity direkt auszuführen, zu debuggen und sich entsprechende Logs in der Konsole anzeigen zu lassen, musste der Entwicklungsprozess für die Focus 3 etwas angepasst werden. Da sie eine Standalone VR-Brille ist, erforderte das Testen von implementierten Funktionalitäten einen neuen Android-Build des Projekts, welches den Fortschritt der Entwicklung teilweise einschränkte.

\section{Technische Entscheidungen}
\subsection{Teleportationsbereich}
Wie bereits angedeutet, wurde entschieden, die Anzahl der Teleportationsbereiche einzuschränken, um den Spieler durch die wichtigen Bereiche des Spiels zu lenken. Innerhalb dieses Bereichs können sich Spieler bewegen, jedoch kann es, dass die tatsächliche Spielfläche etwas kleiner als erwartet ausfallen kann, wodurch wir uns zusätzlich entschieden, die Teleportation in Bereichen so zu verändern, dass nicht die Mitte des Bereichs, sondern das exakt anvisierte Ziel als Position genutzt wird. Ohne diese Änderung hätte es für manche Spieler z.B. nicht möglich sein können, Tränke in den Kessel des Alchemie-Puzzles zu werfen.
\subsubsection{Ausrichtung der Türen}
Aus einem ähnlichen Grund passten wir die Richtung an in welche die Türen der Farbräume geöffnet werden müssen. Eine Tür zum Körper zu ziehen, war vor der oben erwähnten Anpassung für alle Spieler problemlos möglich, während das Öffnung in die entgegengesetzte Richtung außerhalb des Teleportationsbereich aus Platzgründen nicht möglich war. Folglich entschieden wir uns dazu beide Anpassungen zu vereinen, um ein optimales Gefühl zu bekommen.
\subsection{Umgebung Einfärben}
Da sich die Veränderung des Zustands von Materialien während des Spiels, auch nach Beendigung sich permanent auswirkt, musste ein Skript geschrieben werden, welches sich beim Starten des Spiels innerhalb der Methode \textit{Awake} sämtliche referenzierten Materialien merkt und anschließend weiß färbt. Nach Beendigung des Spiels würden über die Methode \textit{OnExit} eben diese Materialien wieder ihren Anfangszustand vor Spielstart einnehmen. Damit dies aber mit allen Materialien möglich ist, benötigten sie einen speziellen Shader, der über das Attribut \textit{\_Color} verfügt, sodass die Materialien umgefärbt werden können.
\subsection{Steuerung Murmelbox}
Die Steuerung der Murmelbox erfolgt wie bereits erwähnt über zwei Hebel, die sich direkt neben der Box befinden. Diese Form der Steuerung wurde gewählt, da die SenseGloves eine solch hohe Anzahl an Meshes in der Box nicht verarbeiten konnte. Weiterhin ist es seit Unity 5 nicht mehr möglich, nicht kinematische RigidBodies mit MeshCollidern zu verwenden. Da die Box eine Vielzahl an diesen verbaut hat, war es nicht möglich die Box direkt mit den VR-Controllern zu bewegen.
\subsection{Rätseltisch: Part 1}
Während das erste Rätsel des Rätseltischs den Spieler aktuell dazu auffordert, ein Tischbein auf die Fingerlöcher zu legen, bestand die vorherige Lösung dieses Rätsels daraus, dass sich die linke Kiste nach rechts öffnen würde und man somit beide Kisten gleichzeitig offen halten könnte, indem man die zuerst geöffnete Klappe über die andere offen hält. Anschließend sollten Spieler die Lichter mit der freien Hand aktivieren. 

\newpage
\noindent
\section{Vorbereitung des Projekts}
Da das Spiel viele verschiedene Hardware- und Softwarelösungen nutzt, ist die Vorbereitung vor Start des Spiels verhältnismäßig aufwendig.

\begin{itemize}
	\item Die VR-Brille, sowie alle Controller und gegebenenfalls weitere Hardware wie \dq Base Stations\dq, müssen angeschaltet und in dem Programm SteamVR erkannt werden.
	\item Die HTC VIVE Tracker müssen angeschaltet und in SteamVR erkannt werden.
	\item Der rechte SenseGlove muss aktiviert, angezogen und über Bluetooth mit dem Computer verbunden werden.
	\item Der Build des Projekts muss gestartet werden.
	\item In der SenseCom-Anwendung, welche sich zu Start des Projekts öffnet, muss der angezogene SenseGlove kalibriert werden.
	\item Die VR-Brille muss aufgesetzt und der VR-Controller in die freie Hand genommen werden.
\end{itemize}
\noindent Dieser Aufwand ist für ein kundenfreundliches Spiel nur schlecht vertretbar und müsste signifikant verändert werden, sobald es veröffentlicht werden sollte. Dieses Problem ist aus der Position eines Spieleentwicklers jedoch nicht lösbar und nur schlecht umgehbar, da besonders der Bereich der Haptic Gloves noch keine allgemeine Schnittstelle bietet. Für VR-Brillen gibt es OpenXR zur gemeinsamen Input-Verarbeitung, jedoch sind Haptic Gloves noch so tief in der Entwicklung, dass nicht einmal bekannt ist, welche Form von VR-Gloves (faden-basiert, vibrations-basiert, Hitze-Kälte-sensibel) sich durchsetzen wird. Ohne diese grundlegenden Informationen kann keine allgemeine Grundlage geschaffen werden, weshalb Software-Unterstützung für jede Art von haptischen Handschuhen einzeln eingebaut werden muss.\\
\noindent Um den Aufwand teilweise zu verringern, arbeitet SenseGlove an einer Lösung, mit welcher die haptischen Handschuhe sich selbst im realen Raum tracken. Dies würde HTC VIVE Tracker obsolet machen und somit einen Schritt in Richtung eines reduzierten Setups bieten.

\section{Interaktion mit Haptic-Gloves}
Bei der Implementierung des Projekts fiel eine weitere visuelle Interaktionsform mit den SenseGloves eher zufällig auf. Durch diese werden die Hände in der echten Welt exakt auf die virtuelle Realität abgebildet. Wegen der in Abschnitt \dq Technisches Konzept\dq beschriebenen technischen Schwierigkeiten, muss ein Spieler gleichzeitig einen SenseGloves-Handschuh und einen VR-Controller in jeweils einer Hand halten. Durch diese zwei verschiedenen Geräte werden die Unterschiede der Darstellungen von Händen sehr schnell deutlich. Die Hand-Augen-Koordination, welche die SenseGloves einem Spieler bieten, führen zu deutlicher stärkerer Immersion als die grobe Annäherung, welche ein einfacher VR-Controller bietet. Besonders bei Aufgaben die Fingerfertigkeit benötigten, wie der bereits beschriebene Rätseltisch, war neben dem haptischen das visuelle Feedback der virtuellen Hände ein wichtiges Merkmal für verstärkte Immersion.
\subsubsection{Haptik}
Haptische Interaktion wurde in diesem Projekt besonders durch die \dq SenseGloves\dq realisiert. Diese Handschuhe sind in der Lage die Bewegung der Finger einer Hand festzusetzen. Diese Eigenschaft wurde im Spiel in verschiedenen Darstellungsformen genutzt. Besonders der Rätseltisch profitierte stark von den Fähigkeiten der haptischen Handschuhe, indem...

%TODO: Erklären, warum Leiter nicht mit Haptic Gloves funktioniert